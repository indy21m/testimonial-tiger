<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WordPress Widget Integration - Demo</title>
    <style>
      body {
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        padding: 20px;
        max-width: 1200px;
        margin: 0 auto;
        background: #f1f1f1;
      }
      .container {
        background: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #23282d;
        margin-bottom: 10px;
      }
      .subtitle {
        color: #666;
        margin-bottom: 30px;
      }
      .method {
        background: #f9f9f9;
        border: 1px solid #e1e1e1;
        border-radius: 4px;
        padding: 20px;
        margin: 20px 0;
      }
      .method h2 {
        color: #0073aa;
        margin-top: 0;
      }
      pre {
        background: #282c34;
        color: #abb2bf;
        padding: 15px;
        border-radius: 4px;
        overflow-x: auto;
        font-family: 'Courier New', monospace;
        font-size: 14px;
      }
      .highlight {
        background: #d4edda;
        border-left: 4px solid #28a745;
        padding: 15px;
        margin: 20px 0;
      }
      .warning {
        background: #fff3cd;
        border-left: 4px solid #ffc107;
        padding: 15px;
        margin: 20px 0;
      }
      .demo-widget {
        border: 2px dashed #0073aa;
        padding: 40px;
        text-align: center;
        color: #999;
        margin: 20px 0;
        border-radius: 4px;
        background: #f7f7f7;
      }
      .features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 30px 0;
      }
      .feature {
        background: #f7f7f7;
        padding: 15px;
        border-radius: 4px;
      }
      .feature h3 {
        color: #0073aa;
        margin-top: 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üêÖ Testimonial Tiger Widget for WordPress</h1>
      <p class="subtitle">
        Enhanced WordPress-compatible widget with automatic container creation
        and advanced retry mechanisms
      </p>

      <div class="highlight">
        <strong>‚ú® New Features:</strong> The widget now automatically creates
        its own container if missing and includes WordPress-specific
        compatibility features!
      </div>

      <div class="method">
        <h2>Method 1: Standard Installation (Recommended)</h2>
        <p>
          Add this code to any WordPress page, post, or widget area in HTML/Text
          mode:
        </p>
        <pre><code>&lt;!-- Testimonial Tiger Widget --&gt;
&lt;div id="tt-widget-YOUR-WIDGET-ID"&gt;&lt;/div&gt;
&lt;script src="https://tiger.zoostack.com/widget/YOUR-WIDGET-ID" async&gt;&lt;/script&gt;</code></pre>
        <p>
          Replace <code>YOUR-WIDGET-ID</code> with your actual widget ID from
          the dashboard.
        </p>
      </div>

      <div class="method">
        <h2>Method 2: Auto-Container (Simplest)</h2>
        <p>
          Just add the script tag - the widget creates its own container
          automatically:
        </p>
        <pre><code>&lt;!-- Widget creates its own container --&gt;
&lt;script src="https://tiger.zoostack.com/widget/YOUR-WIDGET-ID" async&gt;&lt;/script&gt;</code></pre>
        <div class="warning">
          <strong>Note:</strong> The container will be created immediately
          before the script tag.
        </div>
      </div>

      <div class="method">
        <h2>Method 3: WordPress Shortcode</h2>
        <p>Add this to your theme's <code>functions.php</code> file:</p>
        <pre><code>// Testimonial Tiger Widget Shortcode
function testimonial_tiger_widget($atts) {
    $a = shortcode_atts(array(
        'id' => '',
        'container' => 'yes'
    ), $atts);
    
    if (empty($a['id'])) {
        return '&lt;!-- Testimonial Tiger: Widget ID required --&gt;';
    }
    
    $widget_id = esc_attr($a['id']);
    $output = '';
    
    if ($a['container'] === 'yes') {
        $output .= '&lt;div id="tt-widget-' . $widget_id . '"&gt;&lt;/div&gt;';
    }
    
    $output .= '&lt;script src="https://tiger.zoostack.com/widget/' . $widget_id . '" async&gt;&lt;/script&gt;';
    
    return $output;
}
add_shortcode('testimonial_tiger', 'testimonial_tiger_widget');</code></pre>

        <p>Then use in your content:</p>
        <pre><code>[testimonial_tiger id="YOUR-WIDGET-ID"]
[testimonial_tiger id="YOUR-WIDGET-ID" container="no"]  // Auto-container mode</code></pre>
      </div>

      <div class="method">
        <h2>Method 4: Gutenberg Block (Block Editor)</h2>
        <p>In the WordPress block editor:</p>
        <ol>
          <li>Add a "Custom HTML" block</li>
          <li>Paste the widget code</li>
          <li>Preview to see the widget</li>
        </ol>
      </div>

      <div class="features">
        <div class="feature">
          <h3>üîÑ Auto-Recovery</h3>
          <p>
            Retries up to 30 times over 15 seconds to find or create the
            container
          </p>
        </div>
        <div class="feature">
          <h3>üéØ Smart Detection</h3>
          <p>Uses MutationObserver to detect dynamically added containers</p>
        </div>
        <div class="feature">
          <h3>üöÄ WordPress Ready</h3>
          <p>Detects and uses wp.domReady and jQuery if available</p>
        </div>
        <div class="feature">
          <h3>üíæ Memory Safe</h3>
          <p>Automatically cleans up observers after 30 seconds</p>
        </div>
        <div class="feature">
          <h3>üõ°Ô∏è Duplicate Prevention</h3>
          <p>Won't re-initialize if widget is already loaded</p>
        </div>
        <div class="feature">
          <h3>üìù Debug Logging</h3>
          <p>Detailed console messages with [Testimonial Tiger] prefix</p>
        </div>
      </div>

      <div class="highlight">
        <h3>üêõ Troubleshooting</h3>
        <ol>
          <li>Open browser console (F12) to see debug messages</li>
          <li>
            Look for messages starting with <code>[Testimonial Tiger]</code>
          </li>
          <li>
            Common issues:
            <ul>
              <li>
                <strong>Widget not found:</strong> Check that the widget ID
                exists in your dashboard
              </li>
              <li>
                <strong>Container not found:</strong> Try Method 2
                (auto-container)
              </li>
              <li>
                <strong>Still not loading:</strong> Check for JavaScript errors
                from other plugins
              </li>
            </ul>
          </li>
        </ol>
      </div>

      <div class="demo-widget">
        <p>Demo widget would appear here</p>
        <small
          >To see a live widget, replace YOUR-WIDGET-ID with an actual widget ID
          from your dashboard</small
        >
      </div>
    </div>

    <script>
      console.log('[Demo Page] WordPress widget integration demo loaded')
      console.log('[Demo Page] The enhanced widget includes:')
      console.log('  - Auto-container creation')
      console.log('  - MutationObserver for dynamic content')
      console.log('  - WordPress-specific compatibility (wp.domReady, jQuery)')
      console.log('  - Extended retry mechanism (30 attempts)')
      console.log('  - Better error handling and logging')
    </script>
  </body>
</html>
